<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zoomable Volcano Plot with Tooltips in D3 v4</title>
    <script src="https://d3js.org/d3.v5.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,700" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <script src="index.js"></script>
</head>
<body>
<button id="resetBtn">Reset</button>

<div>
<svg id="chart1">
</svg>
</div>

<div>
<svg id="chart2">
</svg>
</div>

<script>
    var yLabel = '-log<tspan baseline-shift="sub">10</tspan>False Discovery Rate',
        xLabel = 'log<tspan baseline-shift="sub">2</tspan>Fold-change',
        file = "intable.csv";

    var volcanoPlot1 = volcanoPlot()
        .xAxisLabel("log2(fold_change)")
        .yAxisLabel("q_value")
        .foldChangeThreshold(2.0)
        .sampleID("gene")
        .xColumn("log2(fold_change)")
        .yColumn("q_value")
        .unique_id("P1")

    
    var volcanoPlot2 = volcanoPlot()
        .xAxisLabel('log2(fold_change)')
        .yAxisLabel('log10intensity')
        .foldChangeThreshold(2.0)
        .sampleID("gene")
        .xColumn("log2(fold_change)")
        .yColumn("log10intensity")
        .unique_id("P2")

    
    d3.csv(file).then(function(data){
        
        d3.select('#chart1')
            .data([data])
            .call(volcanoPlot1);
        d3.select('#chart2')
            .data([data])
            .call(volcanoPlot2);

    });



    // row parser to convert key values into numbers if possible
    function parser(d) {
        for (var key in d) {
            if (d.hasOwnProperty(key)) {
                d[key] = numberParser(d[key]);
            }
        }
        return d;
    }

    // function to turn string into number if possible
    function numberParser(value){
        return (+value) ? +value : value;
    }

</script>

</body>
</html>